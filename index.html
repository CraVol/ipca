

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IPCA Package Documentation &mdash; ipca  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> ipca
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">IPCA Package Documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">ipca</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>IPCA Package Documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="ipca-package-documentation">
<h1>IPCA Package Documentation<a class="headerlink" href="#ipca-package-documentation" title="Permalink to this headline">¶</a></h1>
<p>This package provides a Python (3.5+) implementation of the Instrumented
Principal Components Analysis framework by Kelly, Pruitt, Su (2017)
[<a class="reference external" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=2983919">1</a>, <a class="reference external" href="https://papers.ssrn.com/sol3/papers.cfm?abstract_id=3032013">2</a>].</p>
<div class="toctree-wrapper compound">
</div>
<span class="target" id="module-ipca"></span><dl class="class">
<dt id="ipca.IPCARegressor">
<em class="property">class </em><code class="descclassname">ipca.</code><code class="descname">IPCARegressor</code><span class="sig-paren">(</span><em>n_factors=1</em>, <em>intercept=False</em>, <em>max_iter=10000</em>, <em>iter_tol=1e-05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class implements the IPCA algorithm by Kelly, Pruitt, Su (2017).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_factors</strong> (<em>int, default=1</em>) – The number of latent factors to estimate. Note, the number of
estimated factors is automatically reduced by the number of
pre-specified factors. For example, if n_factors = 2 and one
pre-specified factor is passed, then IPCARegressor will estimate
one factor estimated in addition to the pre-specified factor.</p></li>
<li><p><strong>intercept</strong> (<em>boolean, default=False</em>) – Determines whether the model is estimated with or without an intercept</p></li>
<li><p><strong>max_iter</strong> (<em>int, default=10000</em>) – Maximum number of alternating least squares updates before the
estimation is stopped</p></li>
<li><p><strong>iter_tol</strong> (<em>float, default=10e-6</em>) – Tolerance threshold for stopping the alternating least squares procedure</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="ipca.IPCARegressor.BS_Walpha">
<code class="descname">BS_Walpha</code><span class="sig-paren">(</span><em>ndraws=1000</em>, <em>n_jobs=-1</em>, <em>backend='loky'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor.BS_Walpha"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor.BS_Walpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Bootstrap inference on the hypothesis Gamma_alpha = 0</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndraws</strong> (<em>integer, default=1000</em>) – Number of bootstrap draws and re-estimations to be performed</p></li>
<li><p><strong>backend</strong> (<em>optional</em>) – Value is either ‘loky’ or ‘multiprocessing’</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pval</strong> – P-value from the hypothesis test H0: Gamma_alpha=0</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ipca.IPCARegressor.BS_Wbeta">
<code class="descname">BS_Wbeta</code><span class="sig-paren">(</span><em>ndraws=1000</em>, <em>n_jobs=-1</em>, <em>backend='loky'</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor.BS_Wbeta"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor.BS_Wbeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Test of instrument significance.
Bootstrap inference on the hypothesis  l-th column of Gamma_beta = 0.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ndraws</strong> (<em>integer, default=1000</em>) – Number of bootstrap draws and re-estimations to be performed</p></li>
<li><p><strong>backend</strong> (<em>optional</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>pval</strong> – P-value from the hypothesis test H0: Gamma_alpha=0</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ipca.IPCARegressor.fit">
<code class="descname">fit</code><span class="sig-paren">(</span><em>P=None</em>, <em>PSF=None</em>, <em>refit=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor.fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fits the regressor to the data using an alternating least squares
scheme.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<em>numpy array</em>) – Panel of stacked data. Each row corresponds to an observation
(i, t) where i denotes the entity index and t denotes
the time index. The panel may be unbalanced. The number of unique
entities is n_samples, the number of unique dates is n_time, and
the number of characteristics used as instruments is n_characts.
The columns of the panel are organized in the following order:</p>
<ul>
<li><p>Column 1: entity id (i)</p></li>
<li><p>Column 2: time index (t)</p></li>
<li><p>Column 3: dependent variable corresponding to observation (i,t)</p></li>
<li><p>Column 4 to column 4+n_characts: characteristics.</p></li>
</ul>
</li>
<li><p><strong>PSF</strong> (<em>numpy array, optional</em>) – Set of pre-specified factors as matrix of dimension (n_PSF, n_time)</p></li>
<li><p><strong>refit</strong> (<em>boolean, optional</em>) – Indicates whether the regressor should be re-fit. If set to True
the function will skip unpacking the panel into a tensor and
instead use the stored values from the previous fit. Note, it is
still necessary to pass the previously used P.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>Gamma</strong> (<em>numpy array</em>) – Array with dimensions (n_characts, n_factors) containing the
mapping between characteristics and factors loadings. If there
are n_PSF many pre-specified factors in the model then the
matrix returned is of dimension (n_characts, (n_factors+n_PSF)).
If an intercept is included in the model, its loadings are returned
in the last column of Gamma.</p></li>
<li><p><strong>Factors</strong> (<em>numpy array</em>) – Array with dimensions (n_factors, n_time) containing the estimated
factors. If pre-specified factors were passed the returned
array is of dimension ((n_factors - n_PSF), n_time),
corresponding to the n_factors - n_PSF many factors estimated on
top of the pre-specified ones.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ipca.IPCARegressor.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>P=None</em>, <em>mean_factor=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicts fitted values for a previously fitted regressor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<em>numpy array</em>) – Panel of stacked data. Each row corresponds to an observation
(i, t) where i denotes the entity index and t denotes
the time index. The panel may be unbalanced. If an observation
contains missing data NaN will be returned. Note that the
number of passed characteristics n_characts must match the
number of characteristics used when fitting the regressor.
The columns of the panel are organized in the following order:</p>
<ul>
<li><p>Column 1: entity id (i)</p></li>
<li><p>Column 2: time index (t)</p></li>
<li><p>Column 3 to column 3+n_characts: characteristics.</p></li>
</ul>
</li>
<li><p><strong>mean_factor</strong> (<em>boolean</em>) – If true, the estimated factors are averaged in the time-series
before prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Ypred</strong> – The length of the returned array matches the
the length of data. A nan will be returned if there is missing
characteristics information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ipca.IPCARegressor.predictOOS">
<code class="descname">predictOOS</code><span class="sig-paren">(</span><em>P=None</em>, <em>mean_factor=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ipca/ipca.html#IPCARegressor.predictOOS"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ipca.IPCARegressor.predictOOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicts time t+1 observation using an out-of-sample design.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>P</strong> (<em>numpy array</em>) – Panel of stacked data. Each row corresponds to an observation
(i,t) where i denotes the entity index and t denotes
the time index. All data must correspond to time t, i.e. all
observations occur on the same date.
If an observation contains missing data NaN will be returned.
Note that the number of characteristics (n_characts) passed,
has to match the number of characteristics used when fitting
the regressor.
The columns of the panel are organized in the following order:</p>
<ul>
<li><p>Column 1: entity id (i)</p></li>
<li><p>Column 2: time index (t)</p></li>
<li><p>Column 3: dependent variable corresponding to observation (i,t)</p></li>
<li><p>Column 4 to column 4+n_characts: characteristics.</p></li>
</ul>
</li>
<li><p><strong>mean_factor</strong> (<em>boolean</em>) – If true, the estimated factors are averaged in the time-series
before prediction.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>Ypred</strong> – The length of the returned array matches the
the length of data. A nan will be returned if there is missing
characteristics information.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>numpy array</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Matthias Buechner

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>